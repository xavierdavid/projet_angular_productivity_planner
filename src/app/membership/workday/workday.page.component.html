<div class="container my-5">
  <!-- Header avec date centr√©e et bouton √† droite -->
  <div class="row align-items-center mb-4">
    <div class="col-md-4"></div>
    <div class="col-md-4 text-center">
      <h6 class="mb-2">Working Day</h6>
      <!-- S√©lection de la date - Ecoute de l'√©v√®nement 'change'-->
      <input type="date" class="form-control" [value]="store.date()" (change)="store.updateDate($event)"/>
    </div>
    <div class="col-md-4 text-end mt-3 mt-md-0">
      <button class="btn btn-success rounded-pill px-4 py-2 fw-bold">
        Start the work day
      </button>
    </div>
  </div>

  <!-- Si aucune t√¢che n'est planifi√©e -->
  @if(store.hasNoTaskPlanned()) {
  <div class="text-center my-5" data-testid="inbox-zero-placeholder">
    <!-- Image et texte √† afficher -->
    <img src="images/productivity-planner-inbox-zero.gif" alt="Inbox zero" class="img-fluid mx-auto" />
    <p class="mt-3 text-muted">Aucune t√¢che pr√©vue pour aujourd'hui</p>
  </div>
  }

  <!-- Boucle sur les t√¢ches √† afficher -->
  @for(task of store.taskList(); track $index) {
    <!--Titre de la t√¢che -->
    @if($index === 0) {
      <h6 class="mb-3 text-muted">Most important task</h6>
    }
    @if($index === 1) {
      <h6 class="mb-3 text-muted">T√¢ches de seconde importance</h6>
    }
    @if($index === 2) {
      <h6 class="mb-3 text-muted">T√¢ches restantes</h6>
    }

    <!-- T√¢che  -->
    <div class="card p-3 mb-3" [attr.data-testid]="`task-${$index}`">
      <div class="d-flex align-items-center">
        <!-- S√©lection du type de t√¢che - Ecoute de l'√©v√®nement 'change'-->
        <select class="form-select w-auto me-3" (change)="store.updateTaskType($index, $event)">
          <option selected value="Get things done">‚õ≥Ô∏è</option>
          <option value="Hit the target">üéØ</option>
        </select>
        <!-- S√©lection du titre de la t√¢che - Ecoute de l'√©v√®nement 'input'-->
        <input class="form-control flex-grow-1 fs-5 border-0" [value]="task.title" (input)="store.updateTaskTitle($index, $event)" [attr.data-testid]="`task-input-${$index}`" />
        
        <!-- Timer controls -->
        <div class="d-flex align-items-center ms-3">
          <!-- S√©lection du nombre de pomodoro affect√© √† la t√¢che - Ecoute de l'√©v√®nement 'change'-->
          <select class="form-select w-auto me-3" (change)="store.updateTaskPomodoroCount($index, $event)">
            <option selected value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
          </select>
          <button class="btn btn-sm">‚è∏</button>
          <button class="btn btn-sm">‚è∏</button>
          <button class="btn btn-sm">‚è∏</button>
          <button class="btn btn-sm">‚è∏</button>
          <button class="btn btn-sm">‚è∏</button>
          <span class="mx-3 fs-5">0</span>
          <span>üèÅ</span>
        </div>

        <!-- Ajout d'une ic√¥ne 'X' pour supprimer une t√¢che -->
        <button class="btn btn-link text-muted ms-3" [attr.data-testid]="`task-remove-${$index}`" (click)="store.removeTask($index)">
          <i class="bi bi-x fs-4"></i>
        </button>
      </div>
    </div>  
  }

  <!-- Ajouter une t√¢che -->
  <div class="text-center">
    @if(store.isButtonDisplayed()) {
    <button data-testid="add-task-button" class="btn btn-link text-muted" (click)="store.onAddTask()">Ajouter une t√¢che</button>
    }
  </div>
</div>
